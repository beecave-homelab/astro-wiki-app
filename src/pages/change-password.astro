---
import Layout from '../layouts/Layout.astro';
import { ChangePasswordWrapper } from '../components/auth/ChangePasswordWrapper';

// Check authentication on the client side since we need localStorage
---

<Layout title="Change Password">
  <main class="container mx-auto px-4 py-8 dark:text-white">
    <div id="auth-check" data-redirect="/login" style="display: none;"></div>
    <h1 class="text-2xl font-bold mb-6 dark:text-white">Change Password</h1>
    <ChangePasswordWrapper client:load />
  </main>
</Layout>

<script>
  // Check authentication on the client side
  const authCheck = document.getElementById('auth-check');
  const token = localStorage.getItem('auth_token');
  if (!token && authCheck) {
    window.location.href = authCheck.dataset.redirect || '/login';
  }
</script>
